// Niezawodny efekt glitch z wyraźnymi przesunięciami poziomymi
.glitch-effect {
  position: relative;
  display: inline-block;
  overflow: hidden;

  &__img {
    display: block;
    position: relative;
    width: 100%;
    height: 100%;
    object-fit: cover;
    z-index: 1;
  }

  // Dodajemy pseudo-elementy dla efektu glitch
  &::before,
  &::after {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: inherit;
    background-size: cover;
    background-position: center;
    opacity: 0;
    z-index: 2;
    pointer-events: none;
  }

  &::before {
    animation: glitch-anim-1 8s infinite steps(1);
  }

  &::after {
    animation: glitch-anim-2 12s infinite steps(1);
  }
}

// Animacja pasków - pierwsza seria
@keyframes glitch-anim-1 {
  0%,
  100% {
    opacity: 0;
    clip-path: none;
    transform: translateX(0);
  }

  // Pasek 1
  3%,
  3.1% {
    opacity: 1;
    clip-path: inset(0% 0 93.33% 0);
    transform: translateX(-12px);
  }

  // Pasek 2
  6%,
  6.1% {
    opacity: 1;
    clip-path: inset(3.33% 0 90% 0);
    transform: translateX(15px);
  }

  // Pasek 3
  9%,
  9.1% {
    opacity: 1;
    clip-path: inset(6.66% 0 86.67% 0);
    transform: translateX(-10px);
  }

  // Pasek 4
  12%,
  12.1% {
    opacity: 1;
    clip-path: inset(10% 0 83.33% 0);
    transform: translateX(13px);
  }

  // Pasek 5
  15%,
  15.1% {
    opacity: 1;
    clip-path: inset(13.33% 0 80% 0);
    transform: translateX(-15px);
  }

  // Pasek 6
  18%,
  18.1% {
    opacity: 1;
    clip-path: inset(16.66% 0 76.67% 0);
    transform: translateX(11px);
  }

  // Pasek 7
  21%,
  21.1% {
    opacity: 1;
    clip-path: inset(20% 0 73.33% 0);
    transform: translateX(-13px);
  }

  // Pasek 8
  24%,
  24.1% {
    opacity: 1;
    clip-path: inset(23.33% 0 70% 0);
    transform: translateX(14px);
  }

  // Pasek 9
  27%,
  27.1% {
    opacity: 1;
    clip-path: inset(26.66% 0 66.67% 0);
    transform: translateX(-10px);
  }

  // Pasek 10
  30%,
  30.1% {
    opacity: 1;
    clip-path: inset(30% 0 63.33% 0);
    transform: translateX(12px);
  }

  // Pasek 11
  33%,
  33.1% {
    opacity: 1;
    clip-path: inset(33.33% 0 60% 0);
    transform: translateX(-14px);
  }

  // Pasek 12
  36%,
  36.1% {
    opacity: 1;
    clip-path: inset(36.66% 0 56.67% 0);
    transform: translateX(15px);
  }

  // Pasek 13
  39%,
  39.1% {
    opacity: 1;
    clip-path: inset(40% 0 53.33% 0);
    transform: translateX(-11px);
  }

  // Pasek 14
  42%,
  42.1% {
    opacity: 1;
    clip-path: inset(43.33% 0 50% 0);
    transform: translateX(10px);
  }

  // Pasek 15
  45%,
  45.1% {
    opacity: 1;
    clip-path: inset(46.66% 0 46.67% 0);
    transform: translateX(-13px);
  }

  3.2%,
  6.2%,
  9.2%,
  12.2%,
  15.2%,
  18.2%,
  21.2%,
  24.2%,
  27.2%,
  30.2%,
  33.2%,
  36.2%,
  39.2%,
  42.2%,
  45.2% {
    opacity: 0;
    clip-path: none;
    transform: translateX(0);
  }
}

// Animacja pasków - druga seria
@keyframes glitch-anim-2 {
  0%,
  100% {
    opacity: 0;
    clip-path: none;
    transform: translateX(0);
  }

  // Pasek 16
  4%,
  4.1% {
    opacity: 1;
    clip-path: inset(50% 0 43.33% 0);
    transform: translateX(13px);
  }

  // Pasek 17
  8%,
  8.1% {
    opacity: 1;
    clip-path: inset(53.33% 0 40% 0);
    transform: translateX(-15px);
  }

  // Pasek 18
  12%,
  12.1% {
    opacity: 1;
    clip-path: inset(56.66% 0 36.67% 0);
    transform: translateX(10px);
  }

  // Pasek 19
  16%,
  16.1% {
    opacity: 1;
    clip-path: inset(60% 0 33.33% 0);
    transform: translateX(-12px);
  }

  // Pasek 20
  20%,
  20.1% {
    opacity: 1;
    clip-path: inset(63.33% 0 30% 0);
    transform: translateX(14px);
  }

  // Pasek 21
  24%,
  24.1% {
    opacity: 1;
    clip-path: inset(66.66% 0 26.67% 0);
    transform: translateX(-11px);
  }

  // Pasek 22
  28%,
  28.1% {
    opacity: 1;
    clip-path: inset(70% 0 23.33% 0);
    transform: translateX(12px);
  }

  // Pasek 23
  32%,
  32.1% {
    opacity: 1;
    clip-path: inset(73.33% 0 20% 0);
    transform: translateX(-13px);
  }

  // Pasek 24
  36%,
  36.1% {
    opacity: 1;
    clip-path: inset(76.66% 0 16.67% 0);
    transform: translateX(15px);
  }

  // Pasek 25
  40%,
  40.1% {
    opacity: 1;
    clip-path: inset(80% 0 13.33% 0);
    transform: translateX(-10px);
  }

  // Pasek 26
  44%,
  44.1% {
    opacity: 1;
    clip-path: inset(83.33% 0 10% 0);
    transform: translateX(11px);
  }

  // Pasek 27
  48%,
  48.1% {
    opacity: 1;
    clip-path: inset(86.66% 0 6.67% 0);
    transform: translateX(-15px);
  }

  // Pasek 28
  52%,
  52.1% {
    opacity: 1;
    clip-path: inset(90% 0 3.33% 0);
    transform: translateX(14px);
  }

  // Pasek 29
  56%,
  56.1% {
    opacity: 1;
    clip-path: inset(93.33% 0 0% 0);
    transform: translateX(-12px);
  }

  // Pasek 30 (powtórzenie pierwszego dla pełnych 30)
  60%,
  60.1% {
    opacity: 1;
    clip-path: inset(0% 0 93.33% 0);
    transform: translateX(13px);
  }

  4.2%,
  8.2%,
  12.2%,
  16.2%,
  20.2%,
  24.2%,
  28.2%,
  32.2%,
  36.2%,
  40.2%,
  44.2%,
  48.2%,
  52.2%,
  56.2%,
  60.2% {
    opacity: 0;
    clip-path: none;
    transform: translateX(0);
  }
}
